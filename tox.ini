[tox]
envlist = docs, docs-serve

[testenv:docs]
skipsdist = True
skip_install = True
description = Build the documentation.
deps = mkdocs-material
       mkdocs-monorepo-plugin
       mkdocs-macros-plugin
       mkdocs-mermaid-plugin
       markdown-include
commands = mkdocs build --clean

[testenv:docs-serve]
skipsdist = True
skip_install = True
description = Run a development server for working on documentation.
deps = mkdocs-material
       mkdocs-monorepo-plugin
       mkdocs-macros-plugin
       mkdocs-mermaid-plugin
       markdown-include
commands = mkdocs build --clean
           mkdocs serve -a localhost:8000

[testenv:fix-copyright]
skipsdist = True
skip_install = True
deps =
commands = {toxinidir}/scripts/check_copyright.py

[testenv:check-copyright]
skipsdist = True
skip_install = True
deps =
commands = {toxinidir}/scripts/check_copyright.py --check

[testenv:check-doc-links-hashes]
skipsdist = True
skip_install = True
commands =
    aea init --reset --author ci --remote --ipfs --ipfs-node "/dns/registry.autonolas.tech/tcp/443/https"
    aea packages sync
    {toxinidir}/scripts/check_doc_links.py
    {toxinidir}/scripts/check_doc_ipfs_hashes.py

[testenv:fix-doc-hashes]
skipsdist = True
skip_install = True
commands =
    {toxinidir}/scripts/check_doc_ipfs_hashes.py --fix

[testenv:spell-check]
whitelist_externals = mdspell
skipsdist = True
usedevelop = True
deps =
commands =
    {toxinidir}/scripts/spell-check.sh